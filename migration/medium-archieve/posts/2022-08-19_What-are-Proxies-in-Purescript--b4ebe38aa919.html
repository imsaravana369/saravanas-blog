<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>What are Proxies in Purescript?</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">What are Proxies in Purescript?</h1>
</header>
<section data-field="subtitle" class="p-summary">
Do you know what exactly Proxies are?  Why we use it? When can we use it? If not, let me explain it.
</section>
<section data-field="body" class="e-content">
<section name="9b94" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="e04c" id="e04c" class="graf graf--h3 graf--leading graf--title">What are Proxies in Purescript?</h3><p name="1a6b" id="1a6b" class="graf graf--p graf-after--h3">Have you ever been in a situation where you want to pass a type instead of Value or are you confused by what I just said? Let me explain.</p><figure name="1248" id="1248" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*UF0r4Qh0M3sgF9YpdfWvcg.jpeg" data-width="5184" data-height="3456" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*UF0r4Qh0M3sgF9YpdfWvcg.jpeg"><figcaption class="imageCaption">Photo by <a href="https://unsplash.com/@ranjbarpic?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" data-href="https://unsplash.com/@ranjbarpic?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">Abolfazl Ranjbar</a> on <a href="https://unsplash.com/s/photos/paper-rocket?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" data-href="https://unsplash.com/s/photos/paper-rocket?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">Unsplash</a></figcaption></figure><p name="014b" id="014b" class="graf graf--p graf-after--figure">Let’s first understand, whats the difference between type and value.</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="java" name="3870" id="3870" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">myFavoriteNumber :: <span class="hljs-type">Int</span><br /><span class="hljs-variable">myFavoriteNumber</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span></span></pre><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="java" name="325b" id="325b" class="graf graf--pre graf-after--pre graf--preV2"><span class="pre--content">myName :: <span class="hljs-type">String</span><br /><span class="hljs-variable">myName</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Saravanan&quot;</span></span></pre><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="java" name="6857" id="6857" class="graf graf--pre graf-after--pre graf--preV2"><span class="pre--content"><span class="hljs-type">newtype</span> <span class="hljs-variable">Email</span> <span class="hljs-operator">=</span> Email String<br /><br />myEmail :: <span class="hljs-type">Email</span> <br /><span class="hljs-variable">myEmail</span> <span class="hljs-operator">=</span> Email <span class="hljs-string">&quot;saravanan.m@gmail.com&quot;</span></span></pre><p name="083d" id="083d" class="graf graf--p graf-after--pre">Here all the things that appears after `::` are called types and the things that appears on the left are called values.</p><p name="c6a8" id="c6a8" class="graf graf--p graf-after--p">If you consider <code class="markup--code markup--p-code">myFavoriteNumber</code> , <code class="markup--code markup--p-code">3</code> is the value and <code class="markup--code markup--p-code">Int</code> is the type.</p><p name="82c3" id="82c3" class="graf graf--p graf-after--p">We always pass values to a function, what a function could do if we plainly pass <code class="markup--code markup--p-code">Int </code>to it, instead of specifying its value? (Add two Integers, what is the output?)</p><p name="36de" id="36de" class="graf graf--p graf-after--p graf--trailing">Is there any place where we want to pass the type instead of Value? Is it even possible? Yes it is possible and useful in many scenarios.</p></div></div></section><section name="8fa7" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="a061" id="a061" class="graf graf--p graf--leading">I hope all of you are familiar with the type class <code class="markup--code markup--p-code"><a href="https://pursuit.purescript.org/packages/purescript-prelude/6.0.1/docs/Data.Bounded#t:Bounded" data-href="https://pursuit.purescript.org/packages/purescript-prelude/6.0.1/docs/Data.Bounded#t:Bounded" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Bounded</a></code> which has two values <code class="markup--code markup--p-code">top</code> and <code class="markup--code markup--p-code">bottom</code> which give the highest and lowest value respectively of the respective type in which it is defined. (not a big deal if you don’t know, just continue reading)</p><p name="f71a" id="f71a" class="graf graf--p graf-after--p">Consider you want to create a function that prints the lowest and highest possible value of a particular type</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="yaml" name="c79f" id="c79f" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-attr">getRange ::</span> <span class="hljs-string">forall</span> <span class="hljs-string">a.</span> <span class="hljs-string">Bounded</span> <span class="hljs-string">a</span> <span class="hljs-string">=&gt;</span> {<span class="hljs-attr">lowest ::</span> <span class="hljs-string">a</span> , <span class="hljs-attr">highest ::</span> <span class="hljs-string">a</span> }<br /><span class="hljs-string">getRange</span>  <span class="hljs-string">=</span> { <span class="hljs-attr">lowest :</span>  <span class="hljs-string">bottom</span><br />            , <span class="hljs-attr">highest :</span>  <span class="hljs-string">top</span><br />            }</span></pre><p name="0a83" id="0a83" class="graf graf--p graf-after--pre">But this won’t work, why? How the compiler can decide which top, bottom we want..? Do we want the top of String or Int or any other type? How could we specify the type here?</p><p name="1daa" id="1daa" class="graf graf--p graf-after--p">we could do something like,</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="yaml" name="afe2" id="afe2" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-attr">getRange ::</span> <span class="hljs-string">forall</span> <span class="hljs-string">a.(Bounded</span> <span class="hljs-string">a)</span> <span class="hljs-string">=&gt;</span> <span class="hljs-string">a</span> <span class="hljs-string">-&gt;</span> {<span class="hljs-attr">lowest ::</span> <span class="hljs-string">a</span>,<span class="hljs-attr">highest ::</span> <span class="hljs-string">a</span> }<br /><span class="hljs-string">getRange</span> <span class="hljs-string">_</span> <span class="hljs-string">=</span> { <span class="hljs-attr">lowest :</span>  <span class="hljs-string">bottom</span><br />             ,  <span class="hljs-attr">highest :</span>  <span class="hljs-string">top</span><br />             }</span></pre><p name="5c33" id="5c33" class="graf graf--p graf-after--pre">and we can call this function like</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="yaml" name="550e" id="550e" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-string">&gt;&gt;&gt;</span> <span class="hljs-string">getRange</span> <span class="hljs-number">1</span><br />{<span class="hljs-attr">lowest:</span> <span class="hljs-number">-2147483648</span>, <span class="hljs-attr">highest:</span> <span class="hljs-number">2147483647</span> }<br /><br /><span class="hljs-string">&gt;&gt;&gt;</span> <span class="hljs-string">getRange</span> <span class="hljs-literal">false</span><br />{<span class="hljs-attr">lowest:</span> <span class="hljs-literal">false</span>, <span class="hljs-attr">highest:</span> <span class="hljs-literal">true</span> }<br /><br /><span class="hljs-string">&gt;&gt;&gt;</span> <span class="hljs-string">getRange</span> <span class="hljs-number">1.0</span><br /><br /></span></pre><p name="8bd1" id="8bd1" class="graf graf--p graf-after--pre">Now the purescript compiler knows which <code class="markup--code markup--p-code">top</code> , <code class="markup--code markup--p-code">bottom</code> we want.</p><p name="4fe5" id="4fe5" class="graf graf--p graf-after--p">But passing a value doesn’t make sense here, we aren’t even using the value. So why are we passing a value like <code class="markup--code markup--p-code">1</code>, <code class="markup--code markup--p-code">false</code>, <code class="markup--code markup--p-code">1.0</code>here?</p><p name="ca95" id="ca95" class="graf graf--p graf-after--p">Can we pass only the type <code class="markup--code markup--p-code">Int</code> , <code class="markup--code markup--p-code">Boolean</code> , <code class="markup--code markup--p-code">Number</code> ?</p><p name="8754" id="8754" class="graf graf--p graf-after--p">Yes, we can, that’s exactly what Proxies are for. Let’s look at the definition of Proxy</p><pre name="508d" id="508d" class="graf graf--pre graf-after--p">data Proxy a = Proxy</pre><p name="7ac5" id="7ac5" class="graf graf--p graf-after--pre">Proxy has only one Constructor(Proxy) which has no arguments, the interesting part is the <code class="markup--code markup--p-code">a</code> which is on the left side, with that <code class="markup--code markup--p-code">a</code> (called <a href="https://wiki.haskell.org/Phantom_type" data-href="https://wiki.haskell.org/Phantom_type" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">phantom types</a>) we can <code class="markup--code markup--p-code">encode</code> the type information.</p><p name="30f4" id="30f4" class="graf graf--p graf-after--p">What exactly do I mean by <code class="markup--code markup--p-code">encode</code> here?</p><p name="8f95" id="8f95" class="graf graf--p graf-after--p">Proxy will act as a T<strong class="markup--strong markup--p-strong">ype Holder, </strong>you can encode (hold) a type within it, look at the below example</p><pre name="d916" id="d916" class="graf graf--pre graf-after--p">_intProxy :: Proxy Int<br>_intProxy = Proxy</pre><pre name="26be" id="26be" class="graf graf--pre graf-after--pre">_numberProxy :: Proxy Number<br>_numberProxy = Proxy</pre><p name="a4e2" id="a4e2" class="graf graf--p graf-after--pre">Here the value of both <code class="markup--code markup--p-code">_intProxy</code> and <code class="markup--code markup--p-code">_numberProxy</code> are same (<strong class="markup--strong markup--p-strong">Proxy</strong>) (yes, they are actually useless)</p><p name="d406" id="d406" class="graf graf--p graf-after--p">The interesting part is their type.</p><p name="2a32" id="2a32" class="graf graf--p graf-after--p">Their types differ in a very subtle way (<strong class="markup--strong markup--p-strong">Proxy &lt;type&gt;</strong>) here the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">&lt;type&gt;</em></strong> helps in carrying the <em class="markup--em markup--p-em">extra type information.</em></p><p name="7567" id="7567" class="graf graf--p graf-after--p">For <code class="markup--code markup--p-code">_intProxy</code> its <code class="markup--code markup--p-code">Int</code> for <code class="markup--code markup--p-code">_numerProxy</code> its <code class="markup--code markup--p-code">Number</code></p><p name="35f1" id="35f1" class="graf graf--p graf-after--p">So how could we use the encoded type information in the above example?</p><p name="a470" id="a470" class="graf graf--p graf-after--p">In the above function <code class="markup--code markup--p-code">getRange</code>, instead of passing <code class="markup--code markup--p-code">a</code>, we can pass <code class="markup--code markup--p-code">Proxy a</code></p><pre name="cf38" id="cf38" class="graf graf--pre graf-after--p">getRange :: forall a. (Bounded a) <br>           -&gt; Proxy a<br>           =&gt; {lowest :: a , highest :: a }<br>getRange _ = { lowest :  bottom<br>             ,  highest :  top<br>             }</pre><p name="5c4e" id="5c4e" class="graf graf--p graf-after--pre">Now you can do something like</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="python-repl" name="41ae" id="41ae" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">getRange _intProxy </span><br />{lowest: -2147483648, highest: 2147483647 }</span></pre><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="typescript" name="ef23" id="ef23" class="graf graf--pre graf-after--pre graf--preV2"><span class="pre--content">&gt;&gt;&gt; getRange (<span class="hljs-title class_">Proxy</span> :: <span class="hljs-title class_">Proxy</span> <span class="hljs-title class_">Boolean</span>)-- <span class="hljs-built_in">boolean</span> proxy defined inline<br />{<span class="hljs-attr">lowest</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">highest</span>: <span class="hljs-literal">true</span> }</span></pre><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="python-repl" name="79ee" id="79ee" class="graf graf--pre graf-after--pre graf--preV2"><span class="pre--content"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">getRange <span class="hljs-number">1.0</span> </span><br />{ lowest: -Infinity, highest: -Infinity }</span></pre><blockquote name="6db1" id="6db1" class="graf graf--blockquote graf-after--pre">Note: We have to explicitly specify the type for Proxies to indicate what&#39;s the type of <code class="markup--code markup--blockquote-code">a</code> in the Proxy is.</blockquote><p name="9ed9" id="9ed9" class="graf graf--p graf-after--blockquote graf--trailing">Proxies are nothing but a way to pass around type information, they are used extensively in places where the type information is enough to take a decision, like type class instance selection.</p></div></div></section><section name="60d3" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="49ab" id="49ab" class="graf graf--p graf--leading graf--trailing">There are other kind of Proxies like SProxy (which captures Symbol), RLProxy(which is used for Row types) etc. But those are deprecated and so knowing <code class="markup--code markup--p-code">Proxy</code> is enough😉</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@imsaravananm" class="p-author h-card">Saravanan M</a> on <a href="https://medium.com/p/b4ebe38aa919"><time class="dt-published" datetime="2022-08-19T08:15:13.501Z">August 19, 2022</time></a>.</p><p><a href="https://medium.com/@imsaravananm/what-are-proxies-in-purescript-b4ebe38aa919" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on October 7, 2023.</p></footer></article></body></html>