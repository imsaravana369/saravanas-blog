<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Complete Guide to Encoding/ Decoding in purescriptâ€Šâ€”â€ŠPart #3â€Šâ€”â€ŠEnums</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Complete Guide to Encoding/ Decoding in purescriptâ€Šâ€”â€ŠPart #3â€Šâ€”â€ŠEnums</h1>
</header>
<section data-field="subtitle" class="p-summary">
Encoding &amp; Decoding Enums in Purescript.
</section>
<section data-field="body" class="e-content">
<section name="ef8d" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="766c" id="766c" class="graf graf--h3 graf--leading graf--title">Complete Guide to Encoding/ Decoding in purescriptâ€Šâ€”â€ŠPart #3â€Šâ€”â€ŠEnums</h3><p name="2006" id="2006" class="graf graf--p graf-after--h3">This article is the continuation of the 4 part series of <em class="markup--em markup--p-em">Complete guide to Encoding and Decoding in purescript</em>. In the last article we have taken a deep dive on how we can encode/decode new types and ADTs. If you havenâ€™t read it, I highly recommend giving it a read, it will surely be of great use.</p><div name="ded7" id="ded7" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://imsaravananm.medium.com/complete-guide-to-encoding-and-decoding-in-purescript-part-2-597ae39842f1" data-href="https://imsaravananm.medium.com/complete-guide-to-encoding-and-decoding-in-purescript-part-2-597ae39842f1" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://imsaravananm.medium.com/complete-guide-to-encoding-and-decoding-in-purescript-part-2-597ae39842f1"><strong class="markup--strong markup--mixtapeEmbed-strong">Complete Guide to Encoding and Decoding in Purescript #Part-2</strong><br><em class="markup--em markup--mixtapeEmbed-em">Diving deep into Encoding and Decoding.</em>imsaravananm.medium.com</a><a href="https://imsaravananm.medium.com/complete-guide-to-encoding-and-decoding-in-purescript-part-2-597ae39842f1" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="5a53c280e74841d4204d560cc0dd0e20" data-thumbnail-img-id="1*efoxhtp4urqiB0r2RNI7Aw.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*efoxhtp4urqiB0r2RNI7Aw.jpeg);"></a></div><p name="1002" id="1002" class="graf graf--p graf-after--mixtapeEmbed graf--trailing">In this article, we will be looking at how we can encode and decode Enums in Purescript. This article will be very short unlike the previous article, as this will be very easy and straight forward.</p></div></div></section><section name="5b0b" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="1893" id="1893" class="graf graf--h4 graf--leading">What areÂ Enums?</h4><p name="168a" id="168a" class="graf graf--p graf-after--h4">Okay, letâ€™s start with the question, what are Enums?</p><figure name="2c81" id="2c81" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*0xRmVukYK3A5PggpihwbEg.jpeg" data-width="2400" data-height="1800" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*0xRmVukYK3A5PggpihwbEg.jpeg"><figcaption class="imageCaption">Photo by <a href="https://unsplash.com/@greysonjoralemon?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" data-href="https://unsplash.com/@greysonjoralemon?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">Greyson Joralemon</a> onÂ <a href="https://unsplash.com/s/photos/color?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" data-href="https://unsplash.com/s/photos/color?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">Unsplash</a></figcaption></figure><p name="b347" id="b347" class="graf graf--p graf-after--figure">Enumâ€Šâ€”â€Š<a href="https://www.schoolofhaskell.com/user/Gabriel439/sum-types" data-href="https://www.schoolofhaskell.com/user/Gabriel439/sum-types" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Sum type</a> which has no arguments. Thats all it is. (Donâ€™t confuse with <code class="markup--code markup--p-code"><a href="https://pursuit.purescript.org/packages/purescript-enums/6.0.1/docs/Data.Enum#t:Enum" data-href="https://pursuit.purescript.org/packages/purescript-enums/6.0.1/docs/Data.Enum#t:Enum" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Enum</a></code> typeclass)</p><pre name="f175" id="f175" class="graf graf--pre graf-after--p">data Color = RED<br>           | YELLOW<br>           | GREEN</pre><p name="e97d" id="e97d" class="graf graf--p graf-after--pre graf--trailing">When you add arguments to any of the constructors, e.g <code class="markup--code markup--p-code">OtherColor String</code>Â , our <code class="markup--code markup--p-code">Color</code> type would no longer be a Enum.</p></div></div></section><section name="a3d2" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="02e9" id="02e9" class="graf graf--h4 graf--leading"><strong class="markup--strong markup--h4-strong">Encoding/Decoding Enums</strong></h4><p name="7047" id="7047" class="graf graf--p graf-after--h4">To encode/decode enums, we can still use the <code class="markup--code markup--p-code">genericEncode/ genericDecode</code> specified in the previous chapter.</p><p name="06d4" id="06d4" class="graf graf--p graf-after--p">If we do it that way, for representing <code class="markup--code markup--p-code">RED</code> from JS foreign object, we have to write</p><pre name="44fa" id="44fa" class="graf graf--pre graf-after--p">{<br>  tags : &quot;RED&quot;,<br>  contents : null<br>}</pre><p name="ad12" id="ad12" class="graf graf--p graf-after--pre">We know, <code class="markup--code markup--p-code">contents</code> field will always be null since no constructor in <code class="markup--code markup--p-code">Color</code> has any arguments, its a ENUMÂ !!</p><p name="1243" id="1243" class="graf graf--p graf-after--p">So, can we just pass, <code class="markup--code markup--p-code">â€œREDâ€</code> and make it work?</p><p name="5029" id="5029" class="graf graf--p graf-after--p">Yes, we canÂ !! and the good news is its very simple.</p><p name="0c6e" id="0c6e" class="graf graf--p graf-after--p">Letâ€™s do that step by step,</p><h4 name="454c" id="454c" class="graf graf--h4 graf-after--p">1. Derive Generic Instance for the EnumÂ type.</h4><pre name="ec03" id="ec03" class="graf graf--pre graf-after--h4">derive instance genericColor :: Generic Color _</pre><h4 name="a930" id="a930" class="graf graf--h4 graf-after--pre">2. Deriving Encode/Decode Instance</h4><p name="f789" id="f789" class="graf graf--p graf-after--h4">This is where it differs from the normal encode/decode instance deriving. Instead of using the well known<code class="markup--code markup--p-code">genericEncode</code> and <code class="markup--code markup--p-code">genericDecode</code>Â , we will be using <code class="markup--code markup--p-code">genericEncodeEnum</code> and <code class="markup--code markup--p-code">genericDecodeEnum</code> which are specifically designed for handling Enums.</p><pre name="f49e" id="f49e" class="graf graf--pre graf-after--p">instance decodeColor :: Decode Color<br>   where decode = <strong class="markup--strong markup--pre-strong">genericDecodeEnum</strong> defaultGenericEnumOptions</pre><pre name="6a23" id="6a23" class="graf graf--pre graf-after--pre">instance encodeColor :: Encode Color<br>    where encode = <strong class="markup--strong markup--pre-strong">genericEncodeEnum</strong> defaultGenericEnumOptions</pre><p name="28cf" id="28cf" class="graf graf--p graf-after--pre">Now, user could pass â€œREDâ€ as foreign, it will be decoded to <code class="markup--code markup--p-code">REDÂ :: Color</code></p><blockquote name="2380" id="2380" class="graf graf--blockquote graf-after--p">Note: Itâ€™s also <strong class="markup--strong markup--blockquote-strong">type safe, </strong>try adding a non-enum constructor to Color, and see the compiler throwing an error.</blockquote><h4 name="a1e7" id="a1e7" class="graf graf--h4 graf-after--blockquote">Customizing</h4><p name="4ea2" id="4ea2" class="graf graf--p graf-after--h4">Letâ€™s say you donâ€™t want to pass the exact name of the Enum from foreign object instead you want to pass them in lowercase and still want them to work.</p><p name="f00b" id="f00b" class="graf graf--p graf-after--p">Example, you want to pass â€œredâ€ instead of â€œREDâ€, but you still want it to be decoded to <code class="markup--code markup--p-code">REDÂ :: Color</code></p><p name="6669" id="6669" class="graf graf--p graf-after--p">If that is your use case, you can create your own version of <code class="markup--code markup--p-code">GenericEnumOptions</code> which you are passing as an argument to the generic enum methods above.</p><p name="3b58" id="3b58" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code">GenericEnumOptions </code>is a record with just a single field <code class="markup--code markup--p-code">constructorTagTransform</code><strong class="markup--strong markup--p-strong">Â , </strong>which is a transformer function that takes our enum name as a string and emit a String which the foreign JS object should have.</p><pre name="7d32" id="7d32" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code u-paddingRight0 u-marginRight0">type GenericEnumOptions = <br>    { <strong class="markup--strong markup--pre-strong">constructorTagTransform</strong> :: String -&gt; String }</code></pre><p name="9d06" id="9d06" class="graf graf--p graf-after--pre">To do the above you can write your own <code class="markup--code markup--p-code">GenericEnumOptions</code></p><pre name="3809" id="3809" class="graf graf--pre graf-after--p">myGenericEnumOptions :: <code class="markup--code markup--pre-code">GenericEnumOptions<br></code>myGenericEnumOptions = {constructorTagTransform : toLower}</pre><p name="119e" id="119e" class="graf graf--p graf-after--pre">and use it in your decode/encode instance,</p><pre name="2cd1" id="2cd1" class="graf graf--pre graf-after--p">instance decodeColor :: Decode Color<br>   where decode = genericDecodeEnum <strong class="markup--strong markup--pre-strong">myGenericEnumOptions</strong></pre><pre name="7b21" id="7b21" class="graf graf--pre graf-after--pre graf--trailing">instance encodeColor :: Encode Color<br>    where encode = genericEncodeEnum <strong class="markup--strong markup--pre-strong">myGenericEnumOptions</strong></pre></div></div></section><section name="a2e6" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="19e4" id="19e4" class="graf graf--p graf--leading"><strong class="markup--strong markup--p-strong">Main.js</strong></p><pre name="9c49" id="9c49" class="graf graf--pre graf-after--p">exports[&quot;redColor&quot;]    =  &quot;red&quot;<br>exports[&quot;yellowColor&quot;] =  &quot;yellow&quot;<br>exports[&quot;greenColor&quot;]  =  &quot;green&quot;</pre><p name="a38a" id="a38a" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">Main.purs</strong></p><figure name="fbdf" id="fbdf" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/imsaravana369/df8d6f27f3006d5ca1a96858ba6aab32.js"></script></figure><p name="af65" id="af65" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">Output:</strong></p><figure name="bb5c" id="bb5c" class="graf graf--figure graf-after--p graf--trailing"><img class="graf-image" data-image-id="1*49N-EOUMvalO_KkKAOD2xA.png" data-width="2224" data-height="384" src="https://cdn-images-1.medium.com/max/800/1*49N-EOUMvalO_KkKAOD2xA.png"><figcaption class="imageCaption">spago repl</figcaption></figure></div></div></section><section name="e069" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="feee" id="feee" class="graf graf--p graf--leading">This is how simple it is to work with enums in Purescript and I hope youâ€™ve learnt that in this article.</p><p name="5ae7" id="5ae7" class="graf graf--p graf-after--p">In the next article, which is the fourth and the last part of this series, we will look at how we can create our own encode/decode instance without relying on Generic Instance( which could be costly at times, will explain about this in another article).</p><p name="9c81" id="9c81" class="graf graf--p graf-after--p graf--trailing">ClapğŸ‘ if youâ€™ve liked this article and share it with your friends and colleagues. Will meet you in the next article.</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@imsaravananm" class="p-author h-card">Saravanan M</a> on <a href="https://medium.com/p/cd686f88cd3"><time class="dt-published" datetime="2022-10-29T06:51:26.079Z">October 29, 2022</time></a>.</p><p><a href="https://medium.com/@imsaravananm/complete-guide-to-encoding-decoding-in-purescript-part-3-enums-cd686f88cd3" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on October 7, 2023.</p></footer></article></body></html>