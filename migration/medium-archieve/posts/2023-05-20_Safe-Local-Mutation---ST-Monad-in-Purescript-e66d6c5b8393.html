<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Safe Local Mutation : ST Monad in Purescript</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Safe Local Mutation : ST Monad in Purescript</h1>
</header>
<section data-field="subtitle" class="p-summary">
Immutability is widely recognized as one of the major strengths of functional programming languages like Purescript and Haskell.
</section>
<section data-field="body" class="e-content">
<section name="adcc" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="efe2" id="efe2" class="graf graf--h3 graf--leading graf--title">Safe Local Mutation : ST Monad in Purescript</h3><p name="6999" id="6999" class="graf graf--p graf-after--h3">Immutability is widely recognized as one of the major strengths of functional programming languages like Purescript and Haskell.</p><p name="3279" id="3279" class="graf graf--p graf-after--p">However, when attempting to write a factorial function without any form of recursion or folding, you may find yourself challenging this very notion.</p><p name="21b6" id="21b6" class="graf graf--p graf-after--p">Immutability, at times, can be more of a burden than a benefit.</p><figure name="19f1" id="19f1" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*IwI1yOzOwMY_trDvE2QKQQ.jpeg" data-width="791" data-height="791" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*IwI1yOzOwMY_trDvE2QKQQ.jpeg"><figcaption class="imageCaption">Disclaimer : If used correctly…</figcaption></figure><p name="db26" id="db26" class="graf graf--p graf-after--figure">So can we fall back to the good old mutable variable and write some thing similar to the below python code.</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="cpp" name="2fb0" id="2fb0" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-function">def <span class="hljs-title">factorial</span><span class="hljs-params">(n)</span>:<br />  res =</span> <span class="hljs-number">1</span><br />  <span class="hljs-function"><span class="hljs-keyword">for</span> i in <span class="hljs-title">range</span><span class="hljs-params">(<span class="hljs-number">2</span>,n+<span class="hljs-number">1</span>)</span>:<br />     res =</span> res * i<br /><br />  <span class="hljs-keyword">return</span> res</span></pre><p name="f7d1" id="f7d1" class="graf graf--p graf-after--pre">How can you do re-assignment in Purescript?</p><p name="62ea" id="62ea" class="graf graf--p graf-after--p">The answer that might have recently crossed your mind is <a href="https://pursuit.purescript.org/packages/purescript-refs/6.0.0/docs/Effect.Ref#t:Ref" data-href="https://pursuit.purescript.org/packages/purescript-refs/6.0.0/docs/Effect.Ref#t:Ref" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Ref</a>.</p><p name="dd35" id="dd35" class="graf graf--p graf-after--p">For people who don’t know <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">Ref</strong></code> , it represents a mutable reference, allowing for<em class="markup--em markup--p-em"> </em><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">mutable state operations</em></strong>.</p><p name="7001" id="7001" class="graf graf--p graf-after--p">Does our pursuit of breaking free from the immutability paradigm finally reach a conclusion?</p><p name="3aba" id="3aba" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Not exactly.</em></strong></p><p name="2282" id="2282" class="graf graf--p graf-after--p">Even though <code class="markup--code markup--p-code">Ref</code> provides us with a way of doing immutable state operation, we want an <code class="markup--code markup--p-code">Effect</code> context to use <code class="markup--code markup--p-code">Ref</code> . Consequently, the type signature of our factorial function would change from <code class="markup--code markup--p-code">Int -&gt; Int</code> to<code class="markup--code markup--p-code u-paddingRight0 u-marginRight0"><strong class="markup--strong markup--p-strong">Int -&gt; <em class="markup--em markup--p-em">Effect</em> Int</strong></code></p><p name="0cb7" id="0cb7" class="graf graf--p graf-after--p">Is it logical to enclose our factorial function within Effect when there are no apparent <a href="https://medium.com/nerd-for-tech/what-are-side-effects-in-programming-51f7ef340f98" data-href="https://medium.com/nerd-for-tech/what-are-side-effects-in-programming-51f7ef340f98" class="markup--anchor markup--p-anchor" target="_blank">side effect</a> operations being performed within the function?</p><p name="8c19" id="8c19" class="graf graf--p graf-after--p">So whats the solution?</p><h4 name="bb23" id="bb23" class="graf graf--h4 graf-after--p"><strong class="markup--strong markup--h4-strong">ST Monad</strong></h4><p name="27b0" id="27b0" class="graf graf--p graf-after--h4">Meet <code class="markup--code markup--p-code"><a href="https://pursuit.purescript.org/packages/purescript-st/6.2.0/docs/Control.Monad.ST.Internal#t:STRef" data-href="https://pursuit.purescript.org/packages/purescript-st/6.2.0/docs/Control.Monad.ST.Internal#t:STRef" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">STRef</em></strong></a></code> a more safer and a pure alternative of <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">Ref</strong></code></p><p name="1ae3" id="1ae3" class="graf graf--p graf-after--p">According to pursuit, the official <a href="https://pursuit.purescript.org/packages/purescript-st/6.2.0/docs/Control.Monad.ST.Internal#t:STRef" data-href="https://pursuit.purescript.org/packages/purescript-st/6.2.0/docs/Control.Monad.ST.Internal#t:STRef" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Purescript</a> documentation site</p><blockquote name="9444" id="9444" class="graf graf--pullquote graf-after--p">The type `<code class="markup--code markup--pullquote-code"><strong class="markup--strong markup--pullquote-strong">STRef r a</strong></code>` represents a mutable reference holding a value of type `a`, which can be used within the `<code class="markup--code markup--pullquote-code">ST r</code>` effect.</blockquote><p name="0824" id="0824" class="graf graf--p graf-after--pullquote">I want you to read the definition again, especially the last sentence</p><blockquote name="4a12" id="4a12" class="graf graf--pullquote graf--startsWithDoubleQuote graf-after--p">“… within the <code class="markup--code markup--pullquote-code">ST r</code> effect”</blockquote><p name="4bf8" id="4bf8" class="graf graf--p graf-after--pullquote">So we are not inside <code class="markup--code markup--p-code">Effect</code> Monad anymore but what is this <code class="markup--code markup--p-code">ST r</code> ?</p><p name="a381" id="a381" class="graf graf--p graf-after--p">Let’s again see what pursuit is telling,</p><blockquote name="73bf" id="73bf" class="graf graf--pullquote graf-after--p">The `<code class="markup--code markup--pullquote-code">ST</code>` type constructor allows <em class="markup--em markup--pullquote-em">local mutation</em>, i.e. mutation which does not &quot;escape&quot; into the surrounding computation.</blockquote><p name="35c7" id="35c7" class="graf graf--p graf--startsWithDoubleQuote graf-after--pullquote"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">“Local Mutation</em></strong>” is the aspect that makes STRef safer than Ref. While a comprehensive understanding of this topic would require a <a href="https://ghc.gitlab.haskell.org/ghc/doc/users_guide/exts/impredicative_types.html" data-href="https://ghc.gitlab.haskell.org/ghc/doc/users_guide/exts/impredicative_types.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">separate article</a>, our current focus is on exploring how it can be utilized rather than delving into its inner workings.</p><p name="ecc9" id="ecc9" class="graf graf--p graf-after--p">But in a nutshell, <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">ST</strong></code> acts as a container that facilitates mutation operations through the use of STRef.</p><p name="c03a" id="c03a" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">ST</strong></code> and <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">STRef</strong></code> are closely associated and often used together to enable mutable state operations within a controlled context.</p><h3 name="1ac9" id="1ac9" class="graf graf--h3 graf-after--p">Available Functions</h3><p name="0122" id="0122" class="graf graf--p graf-after--h3">The <code class="markup--code markup--p-code"><a href="https://pursuit.purescript.org/packages/purescript-st/6.2.0/docs/Control.Monad.ST.Internal" data-href="https://pursuit.purescript.org/packages/purescript-st/6.2.0/docs/Control.Monad.ST.Internal" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Control.Monad.ST.Internal</a></code> module provides a variety of functions that can be utilized for constructing programs using the ST monad.</p><p name="9e8d" id="9e8d" class="graf graf--p graf-after--p">Let’s not burden ourselves and check out just a handful of functions from the module.</p><ul class="postList"><li name="d69e" id="d69e" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">new</em></strong> —function to create a mutable variable</li></ul><figure name="0e32" id="0e32" class="graf graf--figure graf-after--li graf--trailing"><img class="graf-image" data-image-id="1*N_t02HbCDf4hBt5Oa26zTQ.png" data-width="1348" data-height="308" src="https://cdn-images-1.medium.com/max/800/1*N_t02HbCDf4hBt5Oa26zTQ.png"></figure></div></div></section><section name="16a3" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><ul class="postList"><li name="0fb3" id="0fb3" class="graf graf--li graf--leading"><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">read</em></strong> — function to read value from the mutable variable.</li></ul><figure name="fdd1" id="fdd1" class="graf graf--figure graf-after--li graf--trailing"><img class="graf-image" data-image-id="1*ozKVgTJGU11kzZknkMuwmA.png" data-width="1342" data-height="288" src="https://cdn-images-1.medium.com/max/800/1*ozKVgTJGU11kzZknkMuwmA.png"></figure></div></div></section><section name="df11" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><ul class="postList"><li name="114f" id="114f" class="graf graf--li graf--leading"><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">write</em></strong> — function to write value into the mutable variable</li></ul><figure name="de22" id="de22" class="graf graf--figure graf-after--li graf--trailing"><img class="graf-image" data-image-id="1*e-ydq5dBWAkLqXcOHInzGg.png" data-width="1360" data-height="308" src="https://cdn-images-1.medium.com/max/800/1*e-ydq5dBWAkLqXcOHInzGg.png"></figure></div></div></section><section name="7220" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><ul class="postList"><li name="6e54" id="6e54" class="graf graf--li graf--leading"><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">run</em></strong> — function to execute our <code class="markup--code markup--li-code"><em class="markup--em markup--li-em">ST</em></code> monad and extract the value that it returns (more on it in below section)</li></ul><figure name="c5aa" id="c5aa" class="graf graf--figure graf-after--li graf--trailing"><img class="graf-image" data-image-id="1*RRKSAlOUy6kp_YNpNbxTJA.png" data-width="1342" data-height="300" src="https://cdn-images-1.medium.com/max/800/1*RRKSAlOUy6kp_YNpNbxTJA.png"></figure></div></div></section><section name="d4e2" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="1ad2" id="1ad2" class="graf graf--h4 graf--leading">Writing Factorial function with STRef</h4><p name="7809" id="7809" class="graf graf--p graf--startsWithDoubleQuote graf-after--h4">“Enough, Show me the code” must be on your mind right now. So let me write the code…</p><p name="8b81" id="8b81" class="graf graf--p graf-after--p">First let’s write code for factorial of 5 and then move on to a generic solution.</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="python" name="d8ae" id="d8ae" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">def</span> <span class="hljs-title function_">factorialOf5</span>():<br />    acc = <span class="hljs-number">1</span><br />    acc = acc * <span class="hljs-number">2</span><br />    acc = acc * <span class="hljs-number">3</span><br />    acc = acc * <span class="hljs-number">4</span><br />    acc = acc * <span class="hljs-number">5</span><br />    <span class="hljs-keyword">return</span> acc</span></pre><p name="4884" id="4884" class="graf graf--p graf-after--pre">The corresponding Purescript code will looks like,</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="lua" name="866f" id="866f" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">factorialOf5 :: forall r. ST r Int<br />factorialOf5 = <span class="hljs-keyword">do</span><br />    acc &lt;- new <span class="hljs-number">1</span> <span class="hljs-comment">--- creating mutable variable `acc` with initial value as 1</span><br />    _ &lt;- modify (\prev -&gt; prev * <span class="hljs-number">2</span>) acc<br />    _ &lt;- modify (\prev -&gt; prev * <span class="hljs-number">3</span>) acc<br />    _ &lt;- modify (\prev -&gt; prev * <span class="hljs-number">4</span>) acc<br />    _ &lt;- modify (\prev -&gt; prev * <span class="hljs-number">5</span>) acc<br />    <span class="hljs-built_in">read</span> acc</span></pre><ul class="postList"><li name="b622" id="b622" class="graf graf--li graf-after--pre">The <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">modify</strong></code> function accepts two arguments: the first argument is a function that modifies the value of a mutable reference passed as the second argument.</li></ul><figure name="9922" id="9922" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*xRK_iTfrctDN9EyDutEVAw.png" data-width="1346" data-height="336" src="https://cdn-images-1.medium.com/max/800/1*xRK_iTfrctDN9EyDutEVAw.png"><figcaption class="imageCaption">It returns the new value, thats why we are discarding it using underscore (you can also use `void`)</figcaption></figure><ul class="postList"><li name="8414" id="8414" class="graf graf--li graf-after--figure">Finally we have to return value stored in <code class="markup--code markup--li-code">acc</code>. The final line <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">read acc</strong></code> does this.</li></ul><p name="4f3e" id="4f3e" class="graf graf--p graf-after--li">Note the signature of our <code class="markup--code markup--p-code"><em class="markup--em markup--p-em">factorialOf5</em></code> function is <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">ST r Int</strong></code> . How can we get a <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">pure</em></strong> <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Int</em></strong> value out of it.</p><p name="d611" id="d611" class="graf graf--p graf-after--p">Remember the <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">run</strong></code> function that we have seen before ?</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="sql" name="4fe1" id="4fe1" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-comment">--- run          :: forall a. (forall r. ST r a) -&gt; a</span><br /><span class="hljs-comment">--- factorialOf5 :: forall r. ST r Int</span><br /><br />computeFactorial :: <span class="hljs-type">Int</span><br />computeFactorial <span class="hljs-operator">=</span> run factorialOf5</span></pre><p name="d133" id="d133" class="graf graf--p graf-after--pre graf--trailing">Our function remains pure, yet it accommodates the use of mutable references. Isn’t it cool?</p></div></div></section><section name="9585" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="6b55" id="6b55" class="graf graf--p graf--leading">But how can we make it generic like the below python code.</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="cpp" name="a437" id="a437" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-function">def <span class="hljs-title">factorial</span><span class="hljs-params">(n)</span>:<br />    acc =</span> <span class="hljs-number">1</span><br />    <span class="hljs-function"><span class="hljs-keyword">for</span> i in <span class="hljs-title">range</span><span class="hljs-params">(<span class="hljs-number">2</span>,n+<span class="hljs-number">1</span>)</span>:<br />        acc =</span> acc * i<br />        <br />    <span class="hljs-keyword">return</span> acc </span></pre><p name="03e3" id="03e3" class="graf graf--p graf-after--pre"><em class="markup--em markup--p-em">Control.Monad.ST.Internal</em> offers a range of pre-defined looping functions such as <code class="markup--code markup--p-code">while, for, and foreach</code></p><p name="4f98" id="4f98" class="graf graf--p graf-after--p">Let’s see how we can write the “actual” factorial function with the <code class="markup--code markup--p-code">for</code> function provided by the module.</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="lua" name="5a7d" id="5a7d" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">factorial :: forall r. Int -&gt; ST r Int<br />factorial n = <span class="hljs-keyword">do</span><br />    acc &lt;- new <span class="hljs-number">1</span> <span class="hljs-comment">-- creating the ref</span><br /><br />    <span class="hljs-keyword">for</span> <span class="hljs-number">2</span> (n + <span class="hljs-number">1</span>) \i -&gt; <span class="hljs-keyword">do</span>  <span class="hljs-comment">--- looping from 2 to n</span><br />      _ &lt;- modify (\acc_val -&gt; acc_val * i) acc <span class="hljs-comment">--- updating the value </span><br />      pure unit<br /><br />    <span class="hljs-built_in">read</span> acc <span class="hljs-comment">--- returning the value</span></span></pre><p name="d4df" id="d4df" class="graf graf--p graf-after--pre">The <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">for</strong></code> function executes the given computation (third argument) for a range of integers starting from the first argument (inclusive) up to the second argument (exclusive).</p><p name="1a3f" id="1a3f" class="graf graf--p graf-after--p">In our case, it runs <code class="markup--code markup--p-code">acc = acc * i</code> where i = 2 to n</p><p name="080f" id="080f" class="graf graf--p graf-after--p">Final step is calling the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">run</em></strong> function,</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="python-repl" name="bce9" id="bce9" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">computeFactorial :: Int -&gt; Int<br />computeFactorial n = run (factorial n)<br /><br /><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">computeFactorial <span class="hljs-number">5</span></span><br /><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-number">120</span></span></span></pre><blockquote name="dcf6" id="dcf6" class="graf graf--blockquote graf-after--pre">Task : Try doing <code class="markup--code markup--blockquote-code">run $ factorial n</code> and figure out why it’s failing.</blockquote><blockquote name="61c7" id="61c7" class="graf graf--blockquote graf-after--blockquote graf--trailing">Question: Can you store <code class="markup--code markup--blockquote-code"><strong class="markup--strong markup--blockquote-strong"><em class="markup--em markup--blockquote-em">STRef</em></strong></code> in a state and use it again? Can you even get it outside the ST Monad? <a href="https://try.purescript.org/?code=LYewJgrgNgpgBAWQIYEsB2cDuALGAnGAKEJWAAcQ8AXOABQKgjCJPMpoBEkqkA6AMRBQwSAEaw4ACgBmQsAEpWFanACi06TADGNSes07FpZTQAqeAJ60IBAMpa8KMruwBGADRxsAJk9lPVDAAHlSeUCgAzqFw6Mxo0eFoANaeBGjMeJ5a4DBGbCoAwiDxeEK8CMVIYLy2prwAkvH4aEhQSuxwXDy8AIJ4eEgWxADmMFQASjDScABcM3CyA1BQcHi8cLWrUrWT03gbVI5ow4qjE1NwALxwaDCYcABEEdoENOiyD4Rw33DEhxYAGRgSCS6GGu1m80WrRWaw2pgh%2B1shzBhH%2BQJBYIh1zwEAwZ12xGAqAwczUGm0NAAqmgUFRCMT0FcvqsYOl8HAACQLOQs74AbS8rikgRCXLgEWwIHu3IArHB5ABdIA" data-href="https://try.purescript.org/?code=LYewJgrgNgpgBAWQIYEsB2cDuALGAnGAKEJWAAcQ8AXOABQKgjCJPMpoBEkqkA6AMRBQwSAEaw4ACgBmQsAEpWFanACi06TADGNSes07FpZTQAqeAJ60IBAMpa8KMruwBGADRxsAJk9lPVDAAHlSeUCgAzqFw6Mxo0eFoANaeBGjMeJ5a4DBGbCoAwiDxeEK8CMVIYLy2prwAkvH4aEhQSuxwXDy8AIJ4eEgWxADmMFQASjDScABcM3CyA1BQcHi8cLWrUrWT03gbVI5ow4qjE1NwALxwaDCYcABEEdoENOiyD4Rw33DEhxYAGRgSCS6GGu1m80WrRWaw2pgh%2B1shzBhH%2BQJBYIh1zwEAwZ12xGAqAwczUGm0NAAqmgUFRCMT0FcvqsYOl8HAACQLOQs74AbS8rikgRCXLgEWwIHu3IArHB5ABdIA" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank">Try this</a></blockquote></div></div></section><section name="c134" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="f09a" id="f09a" class="graf graf--h4 graf--leading">Materials:</h4><ul class="postList"><li name="bdc4" id="bdc4" class="graf graf--li graf-after--h4"><a href="https://gist.github.com/imsaravana369/06eaea460f8f1d3d382de78be2d41207" data-href="https://gist.github.com/imsaravana369/06eaea460f8f1d3d382de78be2d41207" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">Gist link</a> — Factorial implementation using all the three looping functions.</li><li name="0636" id="0636" class="graf graf--li graf-after--li graf--trailing"><a href="https://try.purescript.org/?code=LYewJgrgNgpgBAWQIYEsB2cDuALGAnGAKEJWAAcQ8AXOABQKgjCJPMpoFEAzLmAYxoAKbrwEBKVhWpwR-KgDoAwiDQBnELDiCoIAOYBlbCEwTSUmsrRU8G%2BQhVIw8-QBV5ASSv40SKINcANFyUATgosEGUMEh82AFoMJgBeBBooXgoVDDJ0WABoGAoXACepmzSACJIVEjyAIJ4eEjFgoLy8mISxFwxIFQovgCqqui6AGKUcABcU3DBTVBQcHjycJ40ALQAfHCuy2tWhD18fQNQw6MTeHAYALxwYCCEcC9wMXxwADwbN4lwAIzPV7zOAAJi0GAA1ACxHAADooODbOBA15wABuIBQYDgABI4AUisUtHCyAR0UidmSYBSAFRwFCw97ENEERxvPh8VEolHHU5DEZoXQAdWw4XgMzmlF8SxWB02Oz213WR16-QFo1F4pucHuj25iO%2Bv0wALRLw2FrgqiolFGcCouDgFHQWWu6KQGSQACNNNz3l8fgkTYC0WFNIItAB9L73NCwz64naCNk4xmwx5Iy2xfgAaztRQZMZ13LRfAgjUjmXwAeWuQZJde0aNhJKUbg9LLFareCZnIbLybP0wGSyWk7eErrrg0P%2BsMR5st6D4bMFuntjudXjw-ad5fgqUyO%2B5KY5XO6MRtnvOq6uHBi2Gms3mMuWq3WlN2Ln2KuOl7OFyFW97x1PUQB5V5-SNINTW5eZoliLRQXaON4URZEd0xbE8QJcAiRJakKWRAj2wZXsPmPOtmUIE5yAgLIxgvW1fEfeUPxVGiyDomAGIEJilnuFIME%2BYS5jVf9Vy1WBiGAVAMElWQBDgQY0EPGT0F1B4wNRHQDCME18UErQ%2BXVa9LkmABWCRXh0wxjGwwzBGM8TNTFTRLO0vRbP05ZUiMxirwA8ZKDvBDLKAA" data-href="https://try.purescript.org/?code=LYewJgrgNgpgBAWQIYEsB2cDuALGAnGAKEJWAAcQ8AXOABQKgjCJPMpoFEAzLmAYxoAKbrwEBKVhWpwR-KgDoAwiDQBnELDiCoIAOYBlbCEwTSUmsrRU8G%2BQhVIw8-QBV5ASSv40SKINcANFyUATgosEGUMEh82AFoMJgBeBBooXgoVDDJ0WABoGAoXACepmzSACJIVEjyAIJ4eEjFgoLy8mISxFwxIFQovgCqqui6AGKUcABcU3DBTVBQcHjycJ40ALQAfHCuy2tWhD18fQNQw6MTeHAYALxwYCCEcC9wMXxwADwbN4lwAIzPV7zOAAJi0GAA1ACxHAADooODbOBA15wABuIBQYDgABI4AUisUtHCyAR0UidmSYBSAFRwFCw97ENEERxvPh8VEolHHU5DEZoXQAdWw4XgMzmlF8SxWB02Oz213WR16-QFo1F4pucHuj25iO%2Bv0wALRLw2FrgqiolFGcCouDgFHQWWu6KQGSQACNNNz3l8fgkTYC0WFNIItAB9L73NCwz64naCNk4xmwx5Iy2xfgAaztRQZMZ13LRfAgjUjmXwAeWuQZJde0aNhJKUbg9LLFareCZnIbLybP0wGSyWk7eErrrg0P%2BsMR5st6D4bMFuntjudXjw-ad5fgqUyO%2B5KY5XO6MRtnvOq6uHBi2Gms3mMuWq3WlN2Ln2KuOl7OFyFW97x1PUQB5V5-SNINTW5eZoliLRQXaON4URZEd0xbE8QJcAiRJakKWRAj2wZXsPmPOtmUIE5yAgLIxgvW1fEfeUPxVGiyDomAGIEJilnuFIME%2BYS5jVf9Vy1WBiGAVAMElWQBDgQY0EPGT0F1B4wNRHQDCME18UErQ%2BXVa9LkmABWCRXh0wxjGwwzBGM8TNTFTRLO0vRbP05ZUiMxirwA8ZKDvBDLKAA" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">Code Playground</a> — for experimenting with the code.</li></ul></div></div></section><section name="d03b" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="4083" id="4083" class="graf graf--p graf--leading">Instead of struggling to implement complex functionalities that involve extensive variable mutation in a functional manner, consider embracing the ST monad as an easier and cleaner imperative approach.</p><blockquote name="ca09" id="ca09" class="graf graf--blockquote graf-after--p">Fact : The ST monad is often <strong class="markup--strong markup--blockquote-strong">preferred over recursion</strong> when aiming to write efficient algorithms.</blockquote><p name="6a2a" id="6a2a" class="graf graf--p graf-after--blockquote">The capability to use mutable variables in a safer manner, without relying on monads like Effect, is not only helpful but also fascinating.</p><p name="2794" id="2794" class="graf graf--p graf-after--p graf--trailing">If you found the article helpful, I kindly encourage you to share it with others and let them experience the same fascination.</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@imsaravananm" class="p-author h-card">Saravanan M</a> on <a href="https://medium.com/p/e66d6c5b8393"><time class="dt-published" datetime="2023-05-20T18:07:29.891Z">May 20, 2023</time></a>.</p><p><a href="https://medium.com/@imsaravananm/unlocking-efficiency-exploring-the-st-monad-for-imperative-code-in-purescript-e66d6c5b8393" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on October 7, 2023.</p></footer></article></body></html>